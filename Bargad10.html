<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Be My Valentine ðŸ’–</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Poppins:wght@300;400&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#ff6f91;
  --text:#5a2a3c;

  --bg-slide1:linear-gradient(135deg,#fde2e4,#fff1f7);
  --bg-slide2:linear-gradient(135deg,#ffe5f0,#ffffff);
  --bg-gift1:#fff0f6;
  --bg-gift2:#ffffff;
  --bg-gift3:#ffe9f2;
}

*{box-sizing:border-box;}

body{
  margin:0;
  min-height:100vh;
  font-family:Poppins,sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  color:var(--text);
}

.container{
  width:100%;
  max-width:420px;
  padding:20px;
  text-align:center;
}

.slide{
  display:none;
  padding:20px;
  border-radius:25px;
  animation:fadeUp .6s ease;
}
.slide.active{display:block;}
.slide:nth-of-type(1){background:var(--bg-slide1);}
.slide:nth-of-type(2){background:var(--bg-slide2);}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(25px);} 
  to{opacity:1;transform:translateY(0);} 
}

.buttons{margin-top:25px; position:relative;}

button{
  padding:14px 30px;
  font-size:16px;
  border:none;
  border-radius:40px;
  cursor:pointer;
}

#yesBtn{background:var(--accent); color:white;}
#noBtn{background:#bbb; color:white; position:absolute;}

.gifts{
  display:flex;
  justify-content:center;
  gap:18px;
  margin-top:25px;
}

.gift{
  width:100px;
  animation:floatGift 3s ease-in-out infinite;
  position:relative;
}

@keyframes floatGift{
  0%,100%{transform:translateY(0);} 
  50%{transform:translateY(-8px);} 
}

.gift img{
  width:100%;
  height:100px;
  object-fit:cover;
  border-radius:18px;
  cursor:pointer;
  transition:.3s;
}

.gift img:hover{ transform:scale(1.08); }

.file-input{
  display:none;
}

.glow{
  box-shadow:0 0 20px #ff9acb, 0 0 35px #ffc1e3;
}

.gift-content{
  display:none;
  margin-top:20px;
  padding:18px;
  border-radius:20px;
  animation:fadeUp .5s ease;
}

#gift1{background:var(--bg-gift1);} 
#gift2{background:var(--bg-gift2);} 
#gift3{background:var(--bg-gift3);} 

.letter{
  background:white;
  padding:18px;
  border-radius:15px;
  min-height:100px;
}

.heart{
  position:fixed;
  font-size:22px;
  animation:float 5s linear forwards;
  pointer-events:none;
}

@keyframes float{
  from{transform:translateY(100vh);opacity:1;} 
  to{transform:translateY(-10vh);opacity:0;} 
}
</style>
</head>

<body>

<div class="container">

<div class="slide active">
  <h1>Will you be my Valentine? ðŸ’•</h1>
  <div class="buttons">
    <button id="yesBtn" onclick="nextSlide()">Yes ðŸ’–</button>
    <button id="noBtn">No?</button>
  </div>
</div>

<div class="slide">
  <h1>You said YES ðŸ¥¹ðŸ’˜</h1>
  <div class="gifts">

    <div class="gift">
      <input type="file" accept="image/*" class="file-input" id="file1" onchange="changeThumbnail(event,1)">
      <img id="thumb1" src="1000049646.jpg" onclick="openGift(1)">
    </div>

    <div class="gift">
      <input type="file" accept="image/*" class="file-input" id="file2" onchange="changeThumbnail(event,2)">
      <img id="thumb2" src="1000049647.jpg" onclick="openGift(2)">
    </div>

    <div class="gift">
      <input type="file" accept="image/*" class="file-input" id="file3" onchange="changeThumbnail(event,3)">
      <img id="thumb3" src="1000049645.jpg" onclick="openGift(3)">
    </div>

  </div>
</div>

<div class="gift-content" id="gift1">
  <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/0Q9rHyEG7lME4y2Fqtuxgl" width="100%" height="152" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
</div>

<div class="gift-content" id="gift2">
  <div class="letter" contenteditable="true" id="loveLetter">Write your love letter here ðŸ’Œ</div>
</div>

<div class="gift-content" id="gift3">
  <input type="file" accept="image/*,video/*" onchange="loadMedia(event)">
  <img style="width:100%; border-radius:15px; display:none;">
  <video muted loop style="width:100%; border-radius:15px; display:none;"></video>
</div>

</div>

<script>
const slides=document.querySelectorAll('.slide');
let current=0;
const noBtn=document.getElementById('noBtn');

function nextSlide(){
  slides[current].classList.remove('active');
  current++;
  slides[current].classList.add('active');
  heartShower();
}

function moveNo(){
  noBtn.style.left=Math.random()*70+'%';
  noBtn.style.top=Math.random()*60+'%';
}
noBtn.addEventListener('mouseover',moveNo);
noBtn.addEventListener('click',moveNo);

function openGift(n){
  document.querySelectorAll('.gift-content').forEach(g=>g.style.display='none');
  document.getElementById('gift'+n).style.display='block';
}

function changeThumbnail(e,num){
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=function(event){
    const data=event.target.result;
    document.getElementById('thumb'+num).src=data;
    localStorage.setItem('thumb'+num,data);
  };
  reader.readAsDataURL(file);
}

const letter=document.getElementById("loveLetter");
letter.addEventListener("input",()=>{
  localStorage.setItem("savedLetter",letter.innerHTML);
});

function loadMedia(e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(event){
    const mediaData = event.target.result;
    const img = document.querySelector('#gift3 img');
    const vid = document.querySelector('#gift3 video');
    if(file.type.startsWith("video")){
      vid.src = mediaData;
      vid.style.display = "block";
      img.style.display = "none";
      localStorage.setItem("gift3Type", "video");
    }else{
      img.src = mediaData;
      img.style.display = "block";
      vid.style.display = "none";
      localStorage.setItem("gift3Type", "image");
    }
    localStorage.setItem("gift3Data", mediaData);
  };
  reader.readAsDataURL(file);
}

window.onload=function(){
  const savedLetter=localStorage.getItem("savedLetter");
  if(savedLetter) letter.innerHTML=savedLetter;

  for(let i=1;i<=3;i++){
    const savedThumb=localStorage.getItem('thumb'+i);
    if(savedThumb) document.getElementById('thumb'+i).src=savedThumb;
  }

  const savedData=localStorage.getItem("gift3Data");
  const savedType=localStorage.getItem("gift3Type");
  if(savedData){
    const img=document.querySelector('#gift3 img');
    const vid=document.querySelector('#gift3 video');
    if(savedType==="video"){
      vid.src=savedData; vid.style.display="block";
    }else{
      img.src=savedData; img.style.display="block";
    }
  }
};

function heartShower(){
  for(let i=0;i<35;i++){
    const h=document.createElement('div');
    h.className='heart';
    h.innerHTML='ðŸ’—';
    h.style.left=Math.random()*100+'vw';
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),5000);
  }
}

// Double tap to change thumbnail
let lastTap=0;
document.querySelectorAll('.gift img').forEach((img,index)=>{
  img.addEventListener('click',function(e){
    const now=new Date().getTime();
    if(now-lastTap<300){
      document.getElementById('file'+(index+1)).click();
    }
    lastTap=now;
  });
});
</script>

</body>
</html>
